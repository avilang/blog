<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />














<meta name="description" content="什么是正则表达式在电脑上我们经常会使用（通配符）找出我们需要的文件，例如：*.doc ，这里的 * 代表匹配零个或多个字符。正则表达式也是用来进行文本匹配的工具，只不过它更加强悍。引用 PHP 手册里的一句话：正则表达式是一个从左到右匹配目标字符串的模式，大多数字符自身就代表一个匹配 它们自身的模式。 下面给出几个简单例子，使对正则表达式有个初步的理解。 1hi  //匹配英文字符(忽略大小写)">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP 正则表达式笔记">
<meta property="og:url" content="https://avilang.github.io/blog/2016/PHP 正则表达式笔记/index.html">
<meta property="og:site_name" content="Hello avilang">
<meta property="og:description" content="什么是正则表达式在电脑上我们经常会使用（通配符）找出我们需要的文件，例如：*.doc ，这里的 * 代表匹配零个或多个字符。正则表达式也是用来进行文本匹配的工具，只不过它更加强悍。引用 PHP 手册里的一句话：正则表达式是一个从左到右匹配目标字符串的模式，大多数字符自身就代表一个匹配 它们自身的模式。 下面给出几个简单例子，使对正则表达式有个初步的理解。 1hi  //匹配英文字符(忽略大小写)">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2024-09-16T12:34:43.733Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="PHP 正则表达式笔记">
<meta name="twitter:description" content="什么是正则表达式在电脑上我们经常会使用（通配符）找出我们需要的文件，例如：*.doc ，这里的 * 代表匹配零个或多个字符。正则表达式也是用来进行文本匹配的工具，只不过它更加强悍。引用 PHP 手册里的一句话：正则表达式是一个从左到右匹配目标字符串的模式，大多数字符自身就代表一个匹配 它们自身的模式。 下面给出几个简单例子，使对正则表达式有个初步的理解。 1hi  //匹配英文字符(忽略大小写)">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="https://avilang.github.io/blog/2016/PHP 正则表达式笔记/"/>

  <title> PHP 正则表达式笔记 | Hello avilang </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Hello avilang</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                PHP 正则表达式笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-07T00:00:00+08:00" content="2016-10-07">
              2016-10-07
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="什么是正则表达式"><a href="#什么是正则表达式" class="headerlink" title="什么是正则表达式"></a>什么是正则表达式</h3><p>在电脑上我们经常会使用（通配符）找出我们需要的文件，例如：<code>*.doc</code> ，这里的 <code>*</code> 代表匹配零个或多个字符。正则表达式也是用来进行文本匹配的工具，只不过它更加强悍。引用 PHP 手册里的一句话：<strong>正则表达式是一个从左到右匹配目标字符串的模式，大多数字符自身就代表一个匹配 它们自身的模式。</strong></p>
<p>下面给出几个简单例子，使对正则表达式有个初步的理解。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hi  //匹配英文字符(忽略大小写) hi , HI , Hi , hI</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\bhi\b  //匹配英文单词 hi  &apos;\b&apos;是正则里的一特殊字符（一种断言），表示单词边界</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\bhi\b.*\bLucy\b  //匹配如：&apos;hi my name is Lucy&apos;  &apos;.&apos; 表示匹配除换行符以外的任意字符  &apos;*&apos; 是量词，表示重复零次或更多次</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0\d&#123;2&#125;-\d&#123;8&#125;  //匹配如: 020-12345678  &apos;\d&apos; 匹配一个数字(0-9)    &apos;&#123;n&#125;&apos; 重复n次，如&#123;2&#125; &#123;8&#125;</span><br></pre></td></tr></table></figure>
<p>上面例子中的 <code>\b</code> , <code>.</code> , <code>*</code> , <code>\d</code> , <code>{2}</code> 都有特殊含义，在下文会有说明。</p>
<h3 id="PHP-中正则语法"><a href="#PHP-中正则语法" class="headerlink" title="PHP 中正则语法"></a>PHP 中正则语法</h3><h4 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h4><p>在 PHP 里支持两种正则分别是 POSIX 和 PCRE 。自 PHP 5.3.0起，POSIX 正则表达式扩展被废弃。所以下文讨论的都是基于 PCRE 模式。可点击查看<a href="http://php.net/manual/zh/reference.pcre.pattern.posix.php" target="_blank" rel="noopener">有关与 POSIX 正则表达式的不同</a>和<a href="http://php.net/manual/zh/reference.pcre.pattern.differences.php" target="_blank" rel="noopener">与 perl 的不同之处</a>。</p>
<h4 id="2-分隔符"><a href="#2-分隔符" class="headerlink" title="2.分隔符"></a>2.分隔符</h4><p>当使用 <a href="http://php.net/manual/zh/ref.pcre.php" target="_blank" rel="noopener">PCRE 函数</a> 的时候，模式需要由分隔符闭合包裹。分隔符可以使任意非字母数字、非反斜线、非空白字符。经常使用的分隔符是正斜线 <code>/</code> 、hash符号 <code>#</code> 以及取反符号 <code>~</code> 。下面的例子都是使用合法分隔符的模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/foo bar/</span><br><span class="line">#^[^0-9]$#</span><br><span class="line">+php+</span><br><span class="line">%[a-zA-Z0-9_-]%</span><br></pre></td></tr></table></figure>
<p>如果分隔符需要在模式内进行匹配，它必须使用反斜线进行转义。如果分隔符经常在模式内出现，一个更好的选择就是是用其他分隔符来提高可读性。例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/http:\/\//</span><br><span class="line">#http://#</span><br></pre></td></tr></table></figure>
<h4 id="3-元字符"><a href="#3-元字符" class="headerlink" title="3.元字符"></a>3.元字符</h4><p>正则表达式的威力源于它可以在模式中拥有选择和重复的能力。一些字符被赋予特殊的含义，使其不再单纯的代表自己，模式中的这种有特殊涵义的编码字符 称为<strong>元字符</strong>。<br>共有两种不同的元字符：一种是可以在模式中方括号外任何地方使用的，另外一种是需要在方括号内使用的。</p>
<p>在方括号外使用的元字符如下：</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>一般用于转义字符</td>
</tr>
<tr>
<td>^</td>
<td>断言目标的开始位置(或在多行模式下是行首)</td>
</tr>
<tr>
<td>$</td>
<td>断言目标的结束位置(或在多行模式下是行尾)</td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符外的任何字符(默认)</td>
</tr>
<tr>
<td>[</td>
<td>开始字符类定义</td>
</tr>
<tr>
<td>]</td>
<td>结束字符类定义</td>
</tr>
<tr>
<td>&#124;</td>
<td>开始一个可选分支</td>
</tr>
<tr>
<td>(</td>
<td>子组的开始标记</td>
</tr>
<tr>
<td>)</td>
<td>子组的结束标记</td>
</tr>
<tr>
<td>?</td>
<td>a：作为量词，表示 0 次或 1 次匹配。b：位于量词后面用于改变量词的贪婪特性。</td>
</tr>
<tr>
<td>*</td>
<td>量词，0 次或多次匹配</td>
</tr>
<tr>
<td>+</td>
<td>量词，1 次或多次匹配</td>
</tr>
<tr>
<td>{</td>
<td>自定义量词开始标记</td>
</tr>
<tr>
<td>}</td>
<td>自定义量词结束标记</td>
</tr>
</tbody>
</table>
<p>模式中方括号内的部分称为“字符类”。 在一个字符类中仅有以下可用元字符：</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>转义字符</td>
</tr>
<tr>
<td>^</td>
<td>仅在作为第一个字符(方括号内)时，表明字符类取反</td>
</tr>
<tr>
<td>-</td>
<td>标记字符范围</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<ul>
<li><code>\ba\w*\b</code> 匹配以字母 a 开头的单词，先是某个单词开始处 \b ，然后是字母 a ，然后是任意数量的任意单词字符<em>（单词字符指的是任意字母、数字、下划线）</em> \w* ，最后是单词结束处 \b 。</li>
<li><code>\d+</code> 匹配1个或更多连续的数字。</li>
<li><code>^\d{5,12}$</code> 匹配为5位到12位数字，因为使用了 ^ 和 $ ，所以输入的整个字符串都要用来和 \d{5,12} 来匹配，也就是说整个输入必须是5到12个数字。</li>
</ul>
<h4 id="4-转义序列-反斜线"><a href="#4-转义序列-反斜线" class="headerlink" title="4.转义序列(反斜线)"></a>4.转义序列(反斜线)</h4><p>反斜线 <code>\</code> 有四种用法，详细可点击 <a href="http://php.net/manual/zh/regexp.reference.escape.php" target="_blank" rel="noopener">转义序列(反斜线)</a></p>
<p>【1】作为转义字符，比如，如果你希望匹配一个 <code>*</code> 字符，就需要在模式中写为 <code>\*</code> 。这适用于一个字符在不进行转义会有特殊含义的情况下。 但是，对于非数字字母的字符，总是在需要其进行原文匹配的时候在它前面增加一个反斜线，来声明它代表自己，这是安全的。如果要匹配一个反斜线，那么在模式中使用 <code>\\</code> 。<br>反斜线在单引号字符串和双引号字符串中都有特殊含义，因此要匹配一个反斜线， 模式中必须写为 <code>\\\\</code> 。其中的原因：首先它作为字符串，反斜线会进行转义。最后正则表达式引擎也认为反斜线是转义。因此，需要 4 个反斜线才可以匹配一个反斜线。</p>
<p>【2】提供了一种对非打印字符进行可见编码的控制手段</p>
<p>【3】用来描述特定的字符类</p>
<table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>任意十进制数字</td>
</tr>
<tr>
<td>\D</td>
<td>任意非十进制数字</td>
</tr>
<tr>
<td>\h</td>
<td>任意水平空白字符(since PHP 5.2.4)</td>
</tr>
<tr>
<td>\H</td>
<td>任意非水平空白字符(since PHP 5.2.4)</td>
</tr>
<tr>
<td>\s</td>
<td>任意空白字符</td>
</tr>
<tr>
<td>\S</td>
<td>任意非空白字符</td>
</tr>
<tr>
<td>\v</td>
<td>任意垂直空白字符(since PHP 5.2.4)</td>
</tr>
<tr>
<td>\V</td>
<td>任意非垂直空白字符(since PHP 5.2.4)</td>
</tr>
<tr>
<td>\w</td>
<td>任意单词字符，单词字符指的是任意字母、数字、下划线。</td>
</tr>
<tr>
<td>\W</td>
<td>任意非单词字符</td>
</tr>
</tbody>
</table>
<p>【4】一些简单的断言。一个断言指定一个必须在特定位置匹配的条件，它们不会从目标字符串中消耗任何字符。反斜线断言包括：</p>
<ul>
<li><code>\b</code> 单词边界</li>
<li><code>\B</code> 非单词边界</li>
<li><code>\A</code> 目标的开始位置(独立于多行模式)</li>
<li><code>\Z</code> 目标的结束位置或结束处的换行符(独立于多行模式)</li>
<li><code>\z</code> 目标的结束位置(独立于多行模式)</li>
<li><code>\G</code> 在目标中首次匹配位置</li>
</ul>
<h4 id="5-重复-量词"><a href="#5-重复-量词" class="headerlink" title="5.重复/量词"></a>5.重复/量词</h4><table>
<thead>
<tr>
<th>代码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复零次或更多次，等价于 {0,}</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次，等价于 {1,}</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次，等价于 {0,1}</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody>
</table>
<p>默认情况下，量词都是”贪婪”的，也就是说，它们会在不导致模式匹配失败的前提下，尽可能多的匹配字符(直到最大允许的匹配次数)。然而，如果一个量词紧跟着一个 <code>?</code> 标记，它就会成为懒惰(非贪婪)模式， 它不再尽可能多的匹配，而是尽可能少的匹配。<br>下面直接看示例，理解“贪婪”和“非贪婪”模式是怎么回事。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">对于字符串 &quot;aa&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;cc&quot;</span><br><span class="line"></span><br><span class="line">正则表达式 &quot;&lt;div&gt;.*&lt;/div&gt;&quot;    匹配结果 &quot;&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;&quot;</span><br><span class="line"></span><br><span class="line">正则表达式 &quot;&lt;div&gt;.*?&lt;/div&gt;&quot;   匹配结果 &quot;&lt;div&gt;test1&lt;/div&gt;&quot;</span><br></pre></td></tr></table></figure>
<p>关于更多“贪婪”和“非贪婪”模式的介绍可查阅 <a href="http://php.net/manual/zh/regexp.reference.repetition.php" target="_blank" rel="noopener">http://php.net/manual/zh/regexp.reference.repetition.php</a></p>
<h4 id="6-字符类-方括号"><a href="#6-字符类-方括号" class="headerlink" title="6.字符类(方括号)"></a>6.字符类(方括号)</h4><p>PHP手册中的描述：</p>
<ul>
<li><p>左方括号开始一个字符类的描述，并以方中括号结束。单独的一个右方括号没有特殊含义。如果一个右方括号需要作为一个字符类中的成员，那么可以将它写在字符类的首字符处(如果使用了 ^ 取反，那么是第二个)或者使用转义符。</p>
</li>
<li><p>一个字符类在目标字符串中匹配一个单独的字符；该字符必须是字符类中定义的字符集合的其中一个, 除非使用了 ^ 对字符类取反。如果^需要作为一个字符类的成员，确保它不是该字符类的首字符，或者对其进行转义即可。</p>
</li>
</ul>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[aeiou]    //匹配所有的小写元音字母</span><br><span class="line"></span><br><span class="line">[^aeiou]   //匹配所有非元音字母的字符</span><br><span class="line"></span><br><span class="line">[.?!]      //匹配标点符号(.或?或!)</span><br></pre></td></tr></table></figure>
<p><em>注意：<code>^</code> 只是一个通过枚举指定那些不存在字符类之中的字符的便利符号。而不是断言， 它仍然会从目标字符串中消耗一个字符，并且如果当前匹配点在目标字符串末尾， 匹配将会失败。</em></p>
<p>轻松地指定一个字符范围，范围操作以 ASCII 整理排序。它们可以用于为字符指定数值，比如 [\000-\037]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[0-9]    //代表的含意与 &apos;\d&apos; 就是完全一致的</span><br><span class="line">[a-z0-9A-Z_]    //完全等同于 &apos;\w&apos; 如果只考虑英文的话</span><br></pre></td></tr></table></figure>
<p>下面是一个更复杂的表达式 <code>\(?0\d{2}[) -]?\d{8}</code><br>这个表达式可以匹配几种格式的电话号码，像 (010)88886666，或 022-22334455 ，或 02912345678 等。<br>简单分析：首先是一个转义字符 <code>\(</code> ，它能出现 0 次或 1 次 <code>?</code> ，然后是一个数字 0 ，后面跟着 2 个数字 <code>\d{2}</code> ，然后是 <code>)</code> 或 <code>-</code> 或 “空格” 中的一个，它出现 0 次或 1 次，最后是 8 个数字 <code>\d{8}</code> 。</p>
<h4 id="7-分支"><a href="#7-分支" class="headerlink" title="7.分支 ( | )"></a>7.分支 ( | )</h4><p>竖线字符用于分离模式中的可选路径。比如模式 <code>gilbert|Sullivan</code> 匹配 ”gilbert” 或者 ”sullivan”。竖线可以在模式中出现任意多个，并且允许有空的可选路径(匹配空字符串)。匹配的处理从左到右尝试每一个可选路径，并且使用第一个成功匹配的。如果可选路径在子组(下面定义)中，则”成功匹配”表示同时匹配了子模式中的分支以及主模式中的其他部分。</p>
<p>回看上文里的一个例子 <code>\(?0\d{2}[) -]?\d{8}</code> 这个正则也能匹配 010)12345678 或 (022-87654321 这样的 “不正确” 的格式。其实我们可以利用分支就能解决这个问题，如下：</p>
<p><code>\({1}0\d{2}\){1}[- ]?\d{8}|0\d{2}[- ]?\d{8}</code> 这个表达式匹配 3 位区号的电话号码，其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，也可以没有间隔。</p>
<p><strong>使用分枝条件时，要注意各个条件的顺序</strong></p>
<h4 id="8-内部选项设置"><a href="#8-内部选项设置" class="headerlink" title="8.内部选项设置"></a>8.内部选项设置</h4><p>正则表达式在不同的模式修饰符下匹配出的结果有可能不相同。它的语法是 <code>:(?修饰符)</code></p>
<p>比如，<code>(?im)</code> 设置表明多行大小写不敏感匹配。同样可以用它来取消这些设置，比如 <code>(?im-sx)</code> 设置了 “PCRE_CASELESS”，”PCRE_MULTILINE”，但是同时取消了 “PCRE_DOTALL” 和 “PCRE_EXTENDED”。如果一个字母即出现在 <code>-</code> 之前, 也出现在 <code>-</code> 之后，这个选项被取消设置。</p>
<p>下面紧例举简单的示例，想要了解更多可点击 <a href="http://php.net/manual/zh/regexp.reference.internal-options.php" target="_blank" rel="noopener">内部选项设置</a> 和 <a href="http://php.net/manual/zh/reference.pcre.pattern.modifiers.php" target="_blank" rel="noopener">模式修饰符</a></p>
<p>示例：<code>/ab(?i)c/</code> 仅仅匹配 ”abc” 和 ”abC”</p>
<h4 id="9-子组-子模式"><a href="#9-子组-子模式" class="headerlink" title="9.子组(子模式)"></a>9.子组(子模式)</h4><p>子组通过圆括号分隔界定，并且它们可以嵌套。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字符串：&quot;the red king&quot;</span><br><span class="line">正则表达式：((red|white) (king|queen))</span><br><span class="line">匹配结果：array(&quot;red king&quot;, &quot;red king&quot;, &quot;red&quot;, &quot;king&quot;)</span><br><span class="line">描述：其中第 0 个元素是整个模式匹配的结果，后面的三个元素依次为三个子组匹配的结果。 它们的下标分别为 1， 2， 3。</span><br></pre></td></tr></table></figure>
<p>经常我们会有一种需求需要使用子组进行分组，但又不需要(单独的)捕获它们。在子组定义的左括号后面紧跟字符串 <code>?:</code> 会使得该子组不被单独捕获，并且不会对其后子组序号的计算产生影响。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">字符串：&quot;the red king&quot;</span><br><span class="line">正则表达式：((?:red|white) (king|queen))</span><br><span class="line">匹配结果：array(&quot;red king&quot;, &quot;red king&quot;, &quot;king&quot;)</span><br></pre></td></tr></table></figure>
<p>为了方便简写，如果需要在非捕获子组开始位置设置选项， 选项字母可以位于 <code>?</code> 和 <code>:</code> 之间，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(?i:saturday|sunday)</span><br><span class="line">(?:(?i)saturday|sunday)</span><br></pre></td></tr></table></figure>
<p>上面两种写法实际上是相同的模式。因为可选分支会从左到右尝试每个分支，并且选项没有在子模式结束前被重置，并且由于选项的设置会穿透对后面的其他分支产生影响，因此， 上面的模式都会匹配 ”SUNDAY” 以及 ”Saturday”。</p>
<p>再看一个匹配 IP 地址的正则 <code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)</code><br>相关文章 <a href="http://www.cnblogs.com/txw1958/archive/2011/10/13/2210114.html" target="_blank" rel="noopener">IP地址的正则表达式</a></p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>上文中涉及 PHP 正则表达式中常用的语法，有的语法没细说和涉及到的，如：模式修饰符、后向引用、断言、递归模式，等。你可以通过 PHP 手册查看这些内容。</p>
<p><strong>提示：</strong>一般而言，对于同样的功能，正则表达式函数运行效率要低于字符串函数。如果应用程序较简单，那么就用字符串表达式。但是，对于可以通过单个正则表达式执行的任务来说，如果使用多个字符串函数，则是不对的。—- 摘自《PHP 和 MySQL Web 开发》一书。</p>
<h3 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a>相关阅读</h3><ul>
<li><a href="http://php.net/manual/zh/book.pcre.php" target="_blank" rel="noopener">PHP - 正则表达式(兼容 Perl)</a></li>
<li><a href="https://msdn.microsoft.com/zh-cn/library/d9eze55x%28v=vs.80%29.aspx" target="_blank" rel="noopener">正则表达式</a></li>
<li><a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">正则表达式30分钟入门教程</a></li>
<li><a href="http://www.regexlab.com/zh/regref.htm" target="_blank" rel="noopener">揭开正则表达式的神秘面纱</a></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2016/HTTP 协议/" rel="next" title="HTTP 协议">
                <i class="fa fa-chevron-left"></i> HTTP 协议
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2016/javascript 正则表达式/" rel="prev" title="javascript 正则表达式">
                javascript 正则表达式 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars3.githubusercontent.com/u/10380760?v=3&s=466"
               alt="avilang" />
          <p class="site-author-name" itemprop="name">avilang</p>
          <p class="site-description motion-element" itemprop="description">爱折腾，爱分享，爱学习</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/blog/archives">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/avilang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是正则表达式"><span class="nav-number">1.</span> <span class="nav-text">什么是正则表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PHP-中正则语法"><span class="nav-number">2.</span> <span class="nav-text">PHP 中正则语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-简介"><span class="nav-number">2.1.</span> <span class="nav-text">1.简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-分隔符"><span class="nav-number">2.2.</span> <span class="nav-text">2.分隔符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-元字符"><span class="nav-number">2.3.</span> <span class="nav-text">3.元字符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-转义序列-反斜线"><span class="nav-number">2.4.</span> <span class="nav-text">4.转义序列(反斜线)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-重复-量词"><span class="nav-number">2.5.</span> <span class="nav-text">5.重复/量词</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-字符类-方括号"><span class="nav-number">2.6.</span> <span class="nav-text">6.字符类(方括号)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-分支"><span class="nav-number">2.7.</span> <span class="nav-text">7.分支 ( | )</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-内部选项设置"><span class="nav-number">2.8.</span> <span class="nav-text">8.内部选项设置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-子组-子模式"><span class="nav-number">2.9.</span> <span class="nav-text">9.子组(子模式)</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结语"><span class="nav-number">3.</span> <span class="nav-text">结语</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#相关阅读"><span class="nav-number">4.</span> <span class="nav-text">相关阅读</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">avilang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
